# Maintainer: Alfredo Palhares <masterkorp@masterkorp.net>
# Contributor: Emiliano Vavassori <syntaxerrormmm(at)gmail.com>
# Contributor: nbryskin

_gemname=excon
pkgname=ruby-${_gemname}-0.25.0
pkgver=0.25.0
pkgrel=1
pkgdesc="speed, persistence, http(s), Specific version for chef."
arch=('any')
url="https://github.com/geemus/excon"
license=('MIT')
depends=('ruby')
makedepends=('rubygems')
source=(http://rubygems.org/downloads/${_gemname}-${pkgver}.gem)
noextract=(${_gemname}-${pkgver}.gem)
md5sums=('08f651a01dd580e38bf11e54c0879a6c')

package() {
  cd "$srcdir"
  # _gemdir is defined inside package() because if ruby[gems] is not installed
  # the system, makepkg will exit with an error when sourcing the
  local _gemdir="$(ruby -rubygems -e'puts Gem.default_dir')"

  gem install --ignore-dependencies --no-user-install -i "$pkgdir$_gemdir" -n "$pkgdir/usr/bin" \
    "$_gemname-$pkgver.gem"
}
